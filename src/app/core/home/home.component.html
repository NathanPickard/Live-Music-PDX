<div fxLayout="column" fxLayoutAlign="center center" fxLayoutGap="15px" style="padding-top: 10px">

  <mat-card style="max-width: 500px;">

    <mat-card-header fxLayoutAlign="center center">
      <mat-card-title>
        <h1>Live Music PDX</h1>
      </mat-card-title>
    </mat-card-header>

    <div fxlayoutAlign="center center" style="padding: 0px 80px;">
      <img mat-card-image src=" https://upload.wikimedia.org/wikipedia/commons/7/77/Flag_of_Portland%2C_Oregon.svg">
    </div>

    <mat-card-content fxLayoutAlign="center start" fxLayout="row">
      <div fxLayout="column">
        <!-- <div fxlayoutAlign="center center" style="padding: 0px 80px;">
        <img mat-card-image src=" https://upload.wikimedia.org/wikipedia/commons/7/77/Flag_of_Portland%2C_Oregon.svg">
      </div> -->

        <div fxLayout="row" fxLayoutAlign="center start" fxLayoutGap="10px">
          <div fxLayout="column" fxLayoutAlign="center center" fxFlex="33">
            <h3 style="text-align: center;">Look up and track your favorite artists and PDX venues</h3>
            <!-- <button mat-mini-fab color="primary">
              <mat-icon>search</mat-icon>
            </button> -->
          </div>
          <mat-divider [vertical]="true" style="height: 150px;"></mat-divider>
          <div fxLayout="column" fxLayoutAlign="center center" fxFlex="33">
            <h3 style="text-align: center;">Discover your perfect live music event in the Portland, Oregon area</h3>
            <!-- <button mat-mini-fab color="primary">
              <mat-icon>music_note</mat-icon>
            </button> -->
          </div>
          <mat-divider [vertical]="true" style="height: 150px;"></mat-divider>
          <div fxLayout="column" fxLayoutAlign="center center" fxFlex="33">
            <h3 style="text-align: center;">Quickly find an event by date, search, or checkout the most popular events
              of the day</h3>
            <!-- <button mat-mini-fab color="primary">
              <mat-icon>date_range</mat-icon>
            </button> -->
          </div>
        </div>

        <div fxLayout="row" fxLayoutAlign="center start" fxLayoutGap="10px">
          <div fxLayout="column" fxLayoutAlign="center center" fxFlex="33">
            <button mat-mini-fab color="primary">
              <mat-icon>search</mat-icon>
            </button>
          </div>
          <div fxLayout="column" fxLayoutAlign="center center" fxFlex="33">
            <button mat-mini-fab color="primary">
              <mat-icon>music_note</mat-icon>
            </button>
          </div>
          <div fxLayout="column" fxLayoutAlign="center center" fxFlex="33">
            <button mat-mini-fab color="primary">
              <mat-icon>date_range</mat-icon>
            </button>
          </div>
        </div>

      </div>

    </mat-card-content>

    <!-- <mat-card-actions fxLayout="row" fxLayoutAlign="center center" fxLayoutGap="30px">
      <div fxLayout="column" fxLayoutAlign="center center" fxFlex="33">
        <mat-icon color="primary">date_range</mat-icon>
      </div>
      <div fxLayout="column" fxLayoutAlign="center center" fxFlex="33">
        <mat-icon color="primary">date_range</mat-icon>
      </div>
      <div fxLayout="column" fxLayoutAlign="center center" fxFlex="33">
        <mat-icon color="primary">date_range</mat-icon>
      </div>
    </mat-card-actions> -->

  </mat-card>

  <!-- <mat-divider style="width: 80%"></mat-divider> -->

  <!-- <img mat-card-image src="assets/images/powered-by-songkick-pink.png" style="max-width: 100px;"> -->
</div>

<!-- <mat-card>
    <mat-card-header fxLayoutAlign="center">
      <img src="assets/images/powered-by-songkick-pink.png" style="width: 15%; height: 10%;">
    </mat-card-header>
  </mat-card> -->

<!-- <mat-card style="max-width: 150px;">
    <mat-card-header fxLayoutAlign="center">
      <h3>Popular events in Portland, Oregon</h3>
    </mat-card-header>
    <img mat-card-image src="assets/images/powered-by-songkick-pink.png">
    <mat-card-content>
    </mat-card-content>
  </mat-card> -->

<!-- <div fxLayout="row" fxLayoutAlign="end center"> -->

<!-- <form [formGroup]="searchDateForm" (ngSubmit)="searchDateEvents()">
      <mat-form-field> -->
<!-- <input matInput [matDatepicker]="picker" placeholder="Choose a date" [formControl]="datePicked"> -->
<!-- <input matInput [matDatepicker]="picker" placeholder="Choose a date" formControlName="datePicked">
        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
      </mat-form-field>
      <button type="submit" mat-raised-button color="primary">Search Date</button>
    </form> -->

<!-- <div fxLayout="row" fxLayoutAlign="end center"> -->
<!-- <div fxLayout.lt-md="column"> -->
<!-- <div fxLayout="row" fxLayoutAlign="end center"> -->
<div style="padding: 0px 20px; margin-top: 20px;" fxLayout="row" fxLayout.lt-sm="column"
  fxLayoutAlign.lt-sm="center center">

  <div fxFlex="1 0 auto" style="padding: 0px 20px">

    <form [formGroup]="searchDateForm" (ngSubmit)="searchDateEvents()">
      <mat-form-field>
        <input matInput [matDatepicker]="picker" [min]="minDate" placeholder="Search event date" ngModel
          name="eventDate" formControlName="searchDate" (dateInput)="addEvent($event)">
        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
      </mat-form-field>
    </form>

  </div>

  <div>

    <form [formGroup]="searchEventForm" (ngSubmit)="searchEvents()">
      <mat-form-field appearance="outline">
        <mat-label>Search PDX Events</mat-label>
        <input type="search" matInput placeholder="Search PDX Events" formControlName="searchQuery">
        <!-- <input type="search" matInput placeholder="Search PDX Events" formControlName="searchQuery" [mat-autocomplete]="auto"> -->
        <mat-autocomplete autoActiveFirstOption #auto="matAutocomplete">
        </mat-autocomplete>
      </mat-form-field>
      <button type="submit" mat-raised-button color="primary">Search Events</button>
    </form>

  </div>

</div>

<div *ngIf="searchingEvents && searchEventSubmitted" fxLayoutAlign="center center" style="padding: 25px 0px 25px 0px;">
  <mat-spinner></mat-spinner>
</div>

<div fxLayoutAlign="center center" style="padding: 25px 0px 25px 0px;"
  *ngIf="searchEventNotFound && foundSearchEvents == undefined && searchEventSubmitted && !searchingEvents">
  <h2>No {{ searchEventForm.value.searchQuery }} events found, try again</h2>
</div>

<!-- <div *ngIf="mapFound"> -->

<div *ngIf="searchEventsFound && foundSearchEvents !== undefined">

  <!-- <h2>Search results</h2> -->

  <div class="data-table">
    <table mat-table [dataSource]="searchDataSource" matSort multiTemplateDataRows>

      <ng-container class="mat-column" matColumnDef="date">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          <mat-icon>event</mat-icon>
          Date
        </th>
        <td mat-cell *matCellDef="let row">
          {{ row.start.date | date: 'E MMM d' }}
        </td>
        <td mat-footer-cell *matFooterCellDef></td>
      </ng-container>

      <ng-container class="mat-column" matColumnDef="displayName">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          <mat-icon>local_activity</mat-icon>
          Event
        </th>
        <td mat-cell *matCellDef="let row">
          {{ row.displayName }}
        </td>
        <td mat-footer-cell *matFooterCellDef></td>
      </ng-container>

      <ng-container class="mat-column" matColumnDef="venue">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          <mat-icon>place</mat-icon>
          Venue
        </th>
        <td mat-cell *matCellDef="let row">
          <a href="{{ row.venue.uri }}" mat-stroked-button color="accent" target="_blank">
            {{ row.venue.displayName }}</a>
        </td>
        <td mat-footer-cell *matFooterCellDef></td>
      </ng-container>

      <ng-container class="mat-column" matColumnDef="uri">
        <th mat-header-cell *matHeaderCellDef>
          <mat-icon>link</mat-icon>
          Event Link
        </th>
        <td mat-cell *matCellDef="let row">
          <a href="{{ row.uri}}" mat-stroked-button color="primary" target="_blank">Check out event</a>
        </td>
        <td mat-footer-cell *matFooterCellDef></td>
      </ng-container>

      <ng-container class="mat-column" matColumnDef="datetime">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          <mat-icon>access_time</mat-icon>
          Start Time
        </th>
        <td mat-cell *matCellDef="let row">
          {{ row.start.datetime | date: 'shortTime' }}
        </td>
        <td mat-footer-cell *matFooterCellDef></td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true;"></tr>
      <!-- <tr mat-header-row *matHeaderRowDef= -->
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      <tr mat-footer-row *matFooterRowDef="displayedColumns; sticky: true;"></tr>

    </table>
    <!-- <pagination-controls></pagination-controls> -->
  </div>
</div>

<div *ngIf="foundDateSelectedEvents && foundDateSelectedEvents !== undefined">

  <!-- <h2>Search results</h2> -->

  <mat-toolbar color="accent">
    <mat-toolbar-row fxLayoutAlign="center center">
      <h3>Events on {{ dateSelectedToolbar }}</h3>
    </mat-toolbar-row>
  </mat-toolbar>
  <div class="data-table">
    <table mat-table [dataSource]="searchDateDataSource" matSort multiTemplateDataRows>

      <ng-container class="mat-column" matColumnDef="date">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          <mat-icon>event</mat-icon>
          Date
        </th>
        <td mat-cell *matCellDef="let row">
          {{ row.start.date | date: 'E MMM d' }}
        </td>
        <td mat-footer-cell *matFooterCellDef></td>
      </ng-container>

      <ng-container class="mat-column" matColumnDef="displayName">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          <mat-icon>local_activity</mat-icon>
          Event
        </th>
        <td mat-cell *matCellDef="let row">
          {{ row.displayName }}
        </td>
        <td mat-footer-cell *matFooterCellDef></td>
      </ng-container>

      <ng-container class="mat-column" matColumnDef="venue">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          <mat-icon>place</mat-icon>
          Venue
        </th>
        <td mat-cell *matCellDef="let row">
          <a href="{{ row.venue.uri }}" mat-stroked-button color="accent" target="_blank">
            {{ row.venue.displayName }}</a>
        </td>
        <td mat-footer-cell *matFooterCellDef></td>
      </ng-container>

      <ng-container class="mat-column" matColumnDef="uri">
        <th mat-header-cell *matHeaderCellDef>
          <mat-icon>link</mat-icon>
          Event Link
        </th>
        <td mat-cell *matCellDef="let row">
          <a href="{{ row.uri}}" mat-stroked-button color="primary" target="_blank">Check out event</a>
        </td>
        <td mat-footer-cell *matFooterCellDef></td>
      </ng-container>

      <ng-container class="mat-column" matColumnDef="datetime">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          <mat-icon>access_time</mat-icon>
          Start Time
        </th>
        <td mat-cell *matCellDef="let row">
          {{ row.start.datetime | date: 'shortTime' }}
        </td>
        <td mat-footer-cell *matFooterCellDef></td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="dateSelectedDisplayedColumns; sticky: true;"></tr>
      <!-- <tr mat-header-row *matHeaderRowDef= -->
      <tr mat-row *matRowDef="let row; columns: dateSelectedDisplayedColumns;"></tr>
      <tr mat-footer-row *matFooterRowDef="dateSelectedDisplayedColumns; sticky: true;"></tr>

    </table>
    <!-- <pagination-controls></pagination-controls> -->
  </div>
</div>

<!-- <div *ngIf="this.foundSearchEvents == undefined && !searchEventsFound"> -->
<!-- <div *ngIf="this.foundSearchEvents == undefined"> -->
<!-- <p>{{ searchEventForm.value.searchQuery }} events not found</p>
  </div> -->

<div>
  <div #gmap style="width: 100%; height: 350px;"></div>
</div>

<div *ngIf="!eventsFound">
  <mat-spinner></mat-spinner>
</div>


<div *ngIf="eventsFound">

  <mat-toolbar color="accent">
    <mat-toolbar-row>
      <h3 fxLayoutAlign="center center">Upcoming events in Portland</h3>
      <span class="toolbar-spacer"></span>
      <div style="background-blend-mode: color-burn;">
        <img src=" assets/images/powered-by-songkick-pink.png" style="max-width: 100px;">
      </div>
    </mat-toolbar-row>
  </mat-toolbar>

  <div class="data-table">
    <table mat-table [dataSource]="dataSource" matSort multiTemplateDataRows>

      <ng-container class="mat-column" matColumnDef="date">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          <mat-icon>event</mat-icon>
          Date
        </th>
        <td mat-cell *matCellDef="let row">
          {{ row.start.date | date: 'E, MMM d' }}
        </td>
        <td mat-footer-cell *matFooterCellDef></td>
      </ng-container>

      <ng-container class="mat-column" matColumnDef="displayName">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          <mat-icon>local_activity</mat-icon>
          Event
        </th>

        <!-- <ng-container *ngFor="let x of foundEvents">
            <ng-container *ngFor="let y of x.performance"> -->
        <td mat-cell *matCellDef="let row">
          <!-- {{ row.type }} -->
          <!-- <ng-container *ngFor="let person of row"></ng-container> -->
          <!-- {{ row.performance }} -->
          <!-- {{ person }} -->
          <!-- {{ person.artist.displayName }} -->

          {{ row.displayName }}
          <!-- {{ performancek.displayName }} -->
          <!-- {{ row.performance[i] }} -->
          <!-- {{ row.performance[1].displayName }} -->
          <!-- {{ row.performance[2].displayName }} -->
        </td>
        <!-- </ng-container>
          </ng-container> -->
        <td mat-footer-cell *matFooterCellDef></td>
      </ng-container>

      <ng-container class="mat-column" matColumnDef="venue">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          <mat-icon>place</mat-icon>
          Venue
        </th>
        <td mat-cell *matCellDef="let row">
          <a href="{{ row.venue.uri }}" mat-stroked-button color="accent" target="_blank">
            {{ row.venue.displayName }}</a>
        </td>
        <td mat-footer-cell *matFooterCellDef></td>
      </ng-container>

      <ng-container class="mat-column" matColumnDef="uri">
        <th mat-header-cell *matHeaderCellDef>
          <mat-icon>link</mat-icon>
          Event Link
        </th>
        <td mat-cell *matCellDef="let row">
          <a href="{{ row.uri }}" mat-stroked-button color="primary" target="_blank">
            Check out event
          </a>
        </td>
        <td mat-footer-cell *matFooterCellDef></td>
      </ng-container>

      <ng-container class="mat-column" matColumnDef="datetime">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          <mat-icon>access_time</mat-icon>
          Start Time
        </th>
        <td mat-cell *matCellDef="let row">
          {{ row.start.datetime | date: 'shortTime' }}
        </td>
        <td mat-footer-cell *matFooterCellDef></td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true;"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      <tr mat-footer-row *matFooterRowDef="displayedColumns; sticky: true;"></tr>

    </table>
    <!-- <pagination-controls></pagination-controls> -->

    <!-- <mat-paginator [length]="10" [pageSize]="20" (page)="pageEvent = $event"></mat-paginator> -->
  </div>
</div>

<!-- <mat-card *ngIf="eventsFound"> -->

<!-- <mat-card-header fxLayoutAlign="center" fxLayout="row"> -->
<!-- <mat-card-title>Check out these events!</mat-card-title> -->
<!-- <img src="assets/images/powered-by-songkick-pink.png" style="width: 15%; height: 10%;">
    </mat-card-header> -->


<!-- <div *ngFor="let foundEvent of foundEvents" fxLayoutAlign="center center" fxLayoutWrap fxLayoutGap="20px">
      <mat-card fxFlex>
        <mat-card-content>
          <a href="{{ foundEvent.uri }}" target="_bank" style="text-decoration: none;">
            {{ foundEvent.displayName }} - {{ foundEvent.venue.displayName }}
          </a>
          <div *ngIf="foundEvent.type == 'Festival'">
            <p style="background-color: aqua">{{ foundEvent.type }}</p>
          </div>
        </mat-card-content>
        <mat-card-footer fxLayoutAlign="end">
          {{ foundEvent.start.date | date }}
        </mat-card-footer>
      </mat-card>
    </div> -->

<!-- </mat-card> -->

<!-- <div fxLayout="column" fxLayoutAlign="center stretch">

    <div @fade *ngFor="let foundEvent of foundEvents" fxLayout="column" style="padding: 10px">
      <mat-accordion>
        <mat-expansion-panel>

          <mat-expansion-panel-header>
            <mat-panel-title>
              <h2> {{ foundEvent.start.date | date}} </h2>
              <h3>
                {{ foundEvent.start.date | date: 'E MMM d' }} -
                {{ foundEvent.displayName }}
              </h3>
            </mat-panel-title>
            <mat-panel-description>
            </mat-panel-description>
          </mat-expansion-panel-header>

          <mat-card>

            <h4>Venue: {{ foundEvent.venue.displayName }}</h4>

            <h4 *ngFor="let foundArtist of foundArtists">
              Artist: {{ foundArtist.displayName}}
            </h4>

            <h4>Start time: {{ foundEvent.start.datetime | date: 'shortTime' }}</h4>

            <a href="{{ foundEvent.uri }}" mat-raised-button color="primary" target="_blank">
              Check out event
            </a>

          </mat-card>

        </mat-expansion-panel>
      </mat-accordion>

    </div>


  </div> -->
